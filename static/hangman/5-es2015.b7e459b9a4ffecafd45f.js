(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{jfCt:function(e,t,r){"use strict";r.r(t),r.d(t,"PlayModule",(function(){return be}));var s=r("ofXK"),i=r("tyNb"),n=r("vkgz"),c=r("quSY"),a=r("jnLV"),o=r("fXoL"),b=r("lJxs");function d(...e){const t=e.length;if(0===t)throw new Error("list of properties cannot be empty.");return r=>Object(b.a)(function(e,t){return r=>{let s=r;for(let i=0;i<t;i++){const t=s[e[i]];if(void 0===t)return;s=t}return s}}(e,t))(r)}var u=r("7o/Q");function l(e,t){return r=>r.lift(new h(e,t))}class h{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new p(e,this.compare,this.keySelector))}}class p extends u.a{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(s){return this.destination.error(s)}let r=!1;if(this.hasKey)try{const{compare:e}=this;r=e(this.key,t)}catch(s){return this.destination.error(s)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}var g=r("2Vo4"),m=r("Ea0c");let f=(()=>{class e{constructor(e,t){this.socketService=e,this.router=t,this.channel=new g.a({status:null,currentWord:[],currentTurn:null,errors:0,guesses:[],id:null,master:null,newGuess:null,players:[]}),this.sub=new c.a,this.registerActions()}ngOnDestroy(){this.sub.unsubscribe()}get state(){return this.channel.value}updateState(e){const t=Object.assign(Object.assign({},this.channel.value),e);this.channel.next(t)}startGame(e){this.updateState(e)}registerActions(){this.sub.add(this.socketService.getMessages$("player-leave").pipe(Object(n.a)(({data:{player:e,master:t}})=>{const r={};r.players=this.state.players.filter(t=>t.id!==e.id),t&&(r.master=t),this.updateState(r)})).subscribe()),this.sub.add(this.socketService.getMessages$("player-join").pipe(Object(n.a)(({data:e})=>{const t=[...this.state.players,e];this.updateState({players:t})})).subscribe()),this.sub.add(this.socketService.getMessages$("go-to-start").pipe(Object(n.a)(({data:e})=>{this.updateState(e),this.router.navigate(["game",e.id,"play"])})).subscribe()),this.sub.add(this.socketService.getMessages$("finish-game").pipe(Object(n.a)(({data:e})=>{this.updateState({status:e})})).subscribe()),this.sub.add(this.socketService.getMessages$("set-word").pipe(Object(n.a)(({data:e})=>{this.updateState({currentWord:e})})).subscribe()),this.sub.add(this.socketService.getMessages$("restart-game").pipe(Object(n.a)(({data:e})=>{this.updateState(Object.assign(Object.assign({},e),{newGuess:null}))})).subscribe()),this.sub.add(this.socketService.getMessages$("new-guess").pipe(Object(n.a)(({data:e})=>{const t={};e.ids&&e.ids.length?t.currentWord=this.state.currentWord.map(t=>{const r=Object.assign({},t);return e.ids.includes(t.id)&&(r.isGuessed=!0,r.letter=e.letter),r}):t.errors=this.state.errors+1,t.newGuess=e,t.guesses=this.state.guesses.concat([e]),this.updateState(t)})).subscribe()),this.sub.add(this.socketService.getMessages$("new-turn").pipe(Object(n.a)(({data:e})=>this.updateState({currentTurn:e}))).subscribe())}setWord(e){this.socketService.sendMessage("set-word",e)}restartGame(){this.socketService.sendMessage("restart-game",void 0)}sendLetter(e){this.socketService.sendMessage("new-guess",e)}initGame(){this.socketService.sendMessage("init-game",void 0)}getState$(){return this.channel.asObservable()}getStatus$(){return this.getState$().pipe(d("status"),l())}getNewGuess$(){return this.getState$().pipe(d("newGuess"),l())}getGuesses$(){return this.getState$().pipe(d("guesses"),l())}getErrors$(){return this.getState$().pipe(d("errors"),l())}getWord$(){return this.getState$().pipe(d("currentWord"),l())}getCurrentTurn$(){return this.getState$().pipe(d("currentTurn"),l())}getMaster$(){return this.getState$().pipe(d("master"),l())}getPlayers$(){return this.getState$().pipe(d("players"),l())}getId$(){return this.getState$().pipe(d("id"),l())}}return e.\u0275fac=function(t){return new(t||e)(o.Tb(m.a),o.Tb(i.a))},e.\u0275prov=o.Gb({token:e,factory:e.\u0275fac}),e})();var y=r("FJHl");let v=(()=>{class e extends a.a{constructor(e,t,r,s){super(),this.elRef=e,this.renderer=t,this.gameStateService=r,this.playerInfoService=s,this.wFull=!1,this.block=!1}ngOnInit(){this.addSubscription(this.gameStateService.getCurrentTurn$().pipe(Object(n.a)(e=>{this.playerInfoService.getId()!==e?this.renderer.setAttribute(this.elRef.nativeElement,"hidden","true"):this.renderer.removeAttribute(this.elRef.nativeElement,"hidden")})).subscribe())}}return e.\u0275fac=function(t){return new(t||e)(o.Kb(o.l),o.Kb(o.D),o.Kb(f),o.Kb(y.a))},e.\u0275dir=o.Fb({type:e,selectors:[["","hmoWaitingTurn",""]],features:[o.wb]}),e})();var S=r("3Pt+");let O=(()=>{class e extends a.a{constructor(e){super(),this.gameStateService=e}ngOnInit(){}chooseWord(){this.gameStateService.setWord(this.word)}}return e.\u0275fac=function(t){return new(t||e)(o.Kb(f))},e.\u0275cmp=o.Eb({type:e,selectors:[["hmo-choose-word"]],features:[o.wb],decls:11,vars:2,consts:[["hmoWaitingTurn","",1,"space-y-2"],["hidden","","for","word"],["id","word","type","text","required","","pattern","[a-zA-Z]+( [a-zA-Z]+)*","name","word",1,"rounded-r-none",3,"ngModel","ngModelChange"],["wordModel","ngModel"],["type","submit",1,"rounded-l-none","border","border-primary",3,"disabled","click"]],template:function(e,t){if(1&e&&(o.Pb(0,"div",0),o.Pb(1,"div"),o.mc(2,"Scrivi la parola che gli altri dovranno indovinare"),o.Ob(),o.Pb(3,"div"),o.Pb(4,"form"),o.Pb(5,"label",1),o.mc(6,"Parola da indovinare"),o.Ob(),o.Pb(7,"input",2,3),o.Xb("ngModelChange",(function(e){return t.word=e})),o.Ob(),o.Pb(9,"button",4),o.Xb("click",(function(){return t.chooseWord()})),o.mc(10,"Ok "),o.Ob(),o.Ob(),o.Ob(),o.Ob()),2&e){const e=o.gc(8);o.zb(7),o.dc("ngModel",t.word),o.zb(2),o.dc("disabled",e.invalid)}},directives:[v,S.i,S.d,S.e,S.a,S.h,S.g,S.c,S.f],styles:[""]}),e})();function x(e,t){1&e&&(o.Zb(),o.Lb(0,"circle",12))}function w(e,t){1&e&&(o.Zb(),o.Lb(0,"line",13))}function I(e,t){1&e&&(o.Zb(),o.Lb(0,"line",14))}function k(e,t){1&e&&(o.Zb(),o.Lb(0,"line",15))}function P(e,t){1&e&&(o.Zb(),o.Lb(0,"line",16))}function M(e,t){1&e&&(o.Zb(),o.Lb(0,"line",17))}function E(e,t){1&e&&(o.Zb(),o.Pb(0,"g"),o.Pb(1,"g"),o.Lb(2,"line",18),o.Lb(3,"line",19),o.Ob(),o.Pb(4,"g"),o.Lb(5,"line",20),o.Lb(6,"line",21),o.Ob(),o.Pb(7,"g",22),o.Lb(8,"line",23),o.Lb(9,"line",24),o.Lb(10,"path",25),o.Lb(11,"path",26),o.Ob(),o.Ob())}function $(e,t){if(1&e&&(o.Zb(),o.Pb(0,"g"),o.kc(1,x,1,0,"circle",6),o.kc(2,w,1,0,"line",7),o.kc(3,I,1,0,"line",8),o.kc(4,k,1,0,"line",9),o.kc(5,P,1,0,"line",10),o.kc(6,M,1,0,"line",11),o.kc(7,E,12,0,"g",1),o.Ob()),2&e){const e=o.ac();o.zb(1),o.dc("ngIf",e.firstError),o.zb(1),o.dc("ngIf",e.secondError),o.zb(1),o.dc("ngIf",e.thirdError),o.zb(1),o.dc("ngIf",e.fourthError),o.zb(1),o.dc("ngIf",e.fifthError),o.zb(1),o.dc("ngIf",e.sixthError),o.zb(1),o.dc("ngIf",e.sixthError)}}function L(e,t){1&e&&(o.Zb(),o.Pb(0,"g"),o.Lb(1,"circle",27),o.Lb(2,"line",28),o.Lb(3,"line",29),o.Lb(4,"line",30),o.Lb(5,"line",31),o.Lb(6,"line",32),o.Pb(7,"g"),o.Lb(8,"path",33),o.Lb(9,"path",34),o.Ob(),o.Lb(10,"line",35),o.Lb(11,"line",36),o.Ob())}let T=(()=>{class e extends a.a{constructor(e){super(),this.gameStateService=e,this.firstError=!1,this.secondError=!1,this.thirdError=!1,this.fourthError=!1,this.fifthError=!1,this.sixthError=!1,this.numOfErrors=0}ngOnInit(){this.addSubscription(this.gameStateService.getErrors$().pipe(Object(n.a)(e=>this.setError(e))).subscribe()),this.addSubscription(this.gameStateService.getStatus$().pipe(Object(n.a)(e=>{this.showWin=e&&"lose"!==e?this.gameStateService.state.players.find(t=>t.id===e).name:void 0})).subscribe())}setError(e){this.numOfErrors=e,this.showError(this.numOfErrors)}showError(e){switch(e){case j.SIXTH:this.sixthError=!0;case j.FIFTH:this.fifthError=!0;case j.FOURTH:this.fourthError=!0;case j.THIRD:this.thirdError=!0;case j.SECOND:this.secondError=!0;case j.FIRST:this.firstError=!0}}}return e.\u0275fac=function(t){return new(t||e)(o.Kb(f))},e.\u0275cmp=o.Eb({type:e,selectors:[["hmo-hangman"]],features:[o.wb],decls:9,vars:2,consts:[["version","1.1","xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","viewBox","0 0 236 333",1,"h-48","w-full"],[4,"ngIf"],["x1","0","y1","330.5","x2","236","y2","330.5"],["x1","59","y1","0","x2","59","y2","330.5"],["x1","139.4","y1","53.5","x2","139.4","y2","0"],["x1","58","y1","2.5","x2","139.4","y2","2.5"],["cx","139.4","cy","89.1","r","35.6",4,"ngIf"],["x1","139.4","y1","124.7","x2","139.4","y2","218.7",4,"ngIf"],["x1","139.4","y1","133.9","x2","121.6","y2","212.4",4,"ngIf"],["x1","139.4","y1","134.3","x2","154.2","y2","210.8",4,"ngIf"],["x1","139.4","y1","218.7","x2","114.2","y2","299.3",4,"ngIf"],["x1","139.4","y1","218.7","x2","167.5","y2","291.4",4,"ngIf"],["cx","139.4","cy","89.1","r","35.6"],["x1","139.4","y1","124.7","x2","139.4","y2","218.7"],["x1","139.4","y1","133.9","x2","121.6","y2","212.4"],["x1","139.4","y1","134.3","x2","154.2","y2","210.8"],["x1","139.4","y1","218.7","x2","114.2","y2","299.3"],["x1","139.4","y1","218.7","x2","167.5","y2","291.4"],["x1","122.9","y1","83.4","x2","131.1","y2","91.6"],["x1","122.6","y1","91.9","x2","131.6","y2","82.9"],["x1","147","y1","83.5","x2","155.3","y2","91.8"],["x1","146.8","y1","92","x2","155.8","y2","83"],["transform","matrix(0.345235 0 0 0.431385 31.9527 -3.32898)"],["y2","247.87387084960938","x2","356.18206787109375","y1","247.47872924804688","x1","266.3751220703125"],["y2","263.642578125","x2","341.2400817871094","y1","247.42074584960938","x1","337.6490783691406"],["d","m330.357143,245.357143"],["transform","matrix(-0.472259 -0.706397 0.88146 -0.378466 281.844 598.371)","d","M350.8395,270.71429c-49.027030000000025,-40.117490000000004,10.939909999999998,-32.21556000000001,17.01763999999997,-31.60772"],["cx","167","cy","119.9","r","35.6"],["x1","167","y1","169","x2","231.8","y2","96.7"],["x1","167","y1","155.5","x2","167","y2","249.4"],["x1","167","y1","249.4","x2","180.4","y2","330.5"],["x1","167","y1","249.4","x2","142.4","y2","330.5"],["x1","167","y1","169","x2","92.8","y2","106.4"],["d","M151.8,133.7c0,4.2,6.9,7.7,15.4,7.7"],["d","M182.2,133.7c0,4.2-6.9,7.7-15.4,7.7"],["x1","151","y1","118.1","x2","161.1","y2","118.1"],["x1","173.1","y1","118.1","x2","183.2","y2","118.1"]],template:function(e,t){1&e&&(o.Pb(0,"div"),o.Zb(),o.Pb(1,"svg",0),o.kc(2,$,8,7,"g",1),o.kc(3,L,12,0,"g",1),o.Pb(4,"g"),o.Lb(5,"line",2),o.Lb(6,"line",3),o.Lb(7,"line",4),o.Lb(8,"line",5),o.Ob(),o.Ob(),o.Ob()),2&e&&(o.zb(2),o.dc("ngIf",!t.showWin),o.zb(1),o.dc("ngIf",t.showWin))},directives:[s.j],styles:["span[_ngcontent-%COMP%]{opacity:0}span.visible[_ngcontent-%COMP%]{opacity:1}span[_ngcontent-%COMP%]:not(:last-child){margin-right:.3em}svg[_ngcontent-%COMP%]{fill:none;stroke:#2b2d42;stroke-width:5;stroke-miterlimit:10}"]}),e})();var j=function(e){return e[e.FIRST=1]="FIRST",e[e.SECOND=2]="SECOND",e[e.THIRD=3]="THIRD",e[e.FOURTH=4]="FOURTH",e[e.FIFTH=5]="FIFTH",e[e.SIXTH=6]="SIXTH",e}({}),C=r("pLZG");function z(e,t){if(1&e&&(o.Nb(0),o.mc(1),o.Mb()),2&e){const e=o.ac().$implicit;o.zb(1),o.nc(e.isGuessed?e.letter:"_")}}function W(e,t){1&e&&o.mc(0,"\xa0")}function G(e,t){if(1&e&&(o.Pb(0,"span",2),o.kc(1,z,2,1,"ng-container",3),o.kc(2,W,1,0,"ng-template",null,4,o.lc),o.Ob()),2&e){const e=t.$implicit,r=o.gc(3);o.zb(1),o.dc("ngIf",e.letter)("ngIfElse",r)}}let F=(()=>{class e extends a.a{constructor(e){super(),this.gameStateService=e}ngOnInit(){this.lettersInfo=this.gameStateService.getWord$().pipe(Object(C.a)(e=>!!e&&!!e.length))}}return e.\u0275fac=function(t){return new(t||e)(o.Kb(f))},e.\u0275cmp=o.Eb({type:e,selectors:[["hmo-guessing-word"]],features:[o.wb],decls:3,vars:3,consts:[[1,"m-4","text-center"],["class","letter",4,"ngFor","ngForOf"],[1,"letter"],[4,"ngIf","ngIfElse"],["whiteSpaceTemplate",""]],template:function(e,t){1&e&&(o.Pb(0,"div",0),o.kc(1,G,4,2,"span",1),o.bc(2,"async"),o.Ob()),2&e&&(o.zb(1),o.dc("ngForOf",o.cc(2,1,t.lettersInfo)))},directives:[s.i,s.j],pipes:[s.b],styles:[".letter[_ngcontent-%COMP%]{display:inline-block;width:2.5rem;text-align:center;padding:.5rem;border-right-width:2px;border-top-width:2px;border-bottom-width:2px;border-color:#083d77}.letter[_ngcontent-%COMP%]:first-child{border-top-left-radius:.5rem;border-bottom-left-radius:.5rem;border-left-width:2px}.letter[_ngcontent-%COMP%]:last-child{border-top-right-radius:.5rem;border-bottom-right-radius:.5rem}"]}),e})();var H=r("SxV6"),K=r("itXk");function D(e,t){if(1&e){const e=o.Qb();o.Pb(0,"button",6),o.Xb("click",(function(){o.hc(e);const r=t.$implicit;return o.ac(2).buttonClicked(r.key)})),o.mc(1),o.Ob()}if(2&e){const e=t.$implicit;o.dc("disabled",e.isDisabled),o.zb(1),o.nc(e.key)}}function _(e,t){if(1&e&&(o.Pb(0,"div",3),o.Pb(1,"div",4),o.kc(2,D,2,2,"button",5),o.Ob(),o.Ob()),2&e){const e=o.ac();o.zb(2),o.dc("ngForOf",e.BUTTONS)}}function R(e,t){if(1&e&&(o.Pb(0,"div",10),o.mc(1),o.Ob()),2&e){const e=o.ac(2);o.zb(1),o.oc(" Complimenti ",e.itsMe?"hai vinto":"a "+e.showWin,"! ")}}function A(e,t){if(1&e&&(o.Pb(0,"div"),o.mc(1),o.Ob()),2&e){const e=o.ac(2);o.zb(1),o.oc(' Hai perso, la parola era: "',e.guessingWord,'" ')}}function N(e,t){if(1&e&&(o.Pb(0,"div",7),o.kc(1,R,2,1,"div",8),o.kc(2,A,2,1,"div",9),o.Ob()),2&e){const e=o.ac();o.zb(1),o.dc("ngIf",e.showWin),o.zb(1),o.dc("ngIf",!e.showWin)}}function Z(e,t){if(1&e){const e=o.Qb();o.Pb(0,"div",11),o.Pb(1,"button",12),o.Xb("click",(function(){return o.hc(e),o.ac().restartGame()})),o.mc(2,"Ricomincia"),o.Ob(),o.Ob()}}let X=(()=>{class e extends a.a{constructor(e,t){super(),this.gameStateService=e,this.playerInfoService=t,this.BUTTONS=[];for(let r=65;r<91;r++)this.BUTTONS.push({key:String.fromCharCode(r),isDisabled:!1})}ngOnInit(){this.showGameKeyboard=this.gameStateService.getStatus$().pipe(Object(b.a)(e=>!e)),this.showRestart=Object(K.a)([this.showGameKeyboard,this.gameStateService.getMaster$()]).pipe(Object(b.a)(([e,t])=>!e&&this.playerInfoService.getId()===t)),this.addSubscription(this.gameStateService.getNewGuess$().pipe(Object(C.a)(e=>!!e),Object(n.a)(({letter:e})=>this.disableButton(e))).subscribe()),this.addSubscription(this.gameStateService.getGuesses$().pipe(Object(H.a)(),Object(n.a)(e=>e.forEach(e=>this.disableButton(e.letter)))).subscribe()),this.addSubscription(this.gameStateService.getStatus$().pipe(Object(n.a)(e=>{this.itsMe=void 0,this.showWin=void 0,e&&"lose"!==e?(this.showWin=this.gameStateService.state.players.find(t=>t.id===e).name,this.itsMe=e===this.playerInfoService.getId()):"lose"===e&&(this.showWin=!1)})).subscribe()),this.addSubscription(this.gameStateService.getWord$().pipe(Object(n.a)(e=>this.guessingWord=e.map(e=>e.letter||" ").join(""))).subscribe())}buttonClicked(e){this.gameStateService.sendLetter(e)}disableButton(e){const t=this.BUTTONS.find(t=>t.key===e);t&&(t.isDisabled=!0)}restartGame(){this.gameStateService.restartGame()}}return e.\u0275fac=function(t){return new(t||e)(o.Kb(f),o.Kb(y.a))},e.\u0275cmp=o.Eb({type:e,selectors:[["hmo-game-keyboard"]],features:[o.wb],decls:5,vars:7,consts:[["hmoWaitingTurn","",4,"ngIf"],["class","my-2 text-xl text-center",4,"ngIf"],["class","text-center",4,"ngIf"],["hmoWaitingTurn",""],[1,"flex","flex-wrap","justify-around","md:mx-auto","md:w-10/12"],["class","m-2 py-4 md:py-3 md:m-2 w-1/4 sm:w-1/6 md:w-1/12",3,"disabled","click",4,"ngFor","ngForOf"],[1,"m-2","py-4","md:py-3","md:m-2","w-1/4","sm:w-1/6","md:w-1/12",3,"disabled","click"],[1,"my-2","text-xl","text-center"],["class","",4,"ngIf"],[4,"ngIf"],[1,""],[1,"text-center"],[3,"click"]],template:function(e,t){1&e&&(o.kc(0,_,3,1,"div",0),o.bc(1,"async"),o.kc(2,N,3,2,"div",1),o.kc(3,Z,3,0,"div",2),o.bc(4,"async")),2&e&&(o.dc("ngIf",o.cc(1,3,t.showGameKeyboard)),o.zb(2),o.dc("ngIf",void 0!==t.showWin),o.zb(1),o.dc("ngIf",o.cc(4,5,t.showRestart)))},directives:[s.j,v,s.i],pipes:[s.b],styles:[""]}),e})();function U(e,t){1&e&&(o.Nb(0),o.Lb(1,"hmo-choose-word"),o.Mb())}function B(e,t){1&e&&(o.Nb(0),o.Lb(1,"hmo-hangman"),o.Lb(2,"hmo-guessing-word"),o.Lb(3,"hmo-game-keyboard"),o.Mb())}let V=(()=>{class e extends a.a{constructor(e){super(),this.gameStateService=e,this.Status=Y,this.sub=new c.a}ngOnInit(){this.sub.add(this.gameStateService.getWord$().pipe(Object(n.a)(e=>{this.status=e&&e.length?Y.PLAY:Y.CHOOSE_WORD})).subscribe())}ngOnDestroy(){this.sub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.Kb(f))},e.\u0275cmp=o.Eb({type:e,selectors:[["hmo-play-screen"]],features:[o.wb],decls:3,vars:2,consts:[[1,"pt-2"],[4,"ngIf"]],template:function(e,t){1&e&&(o.Pb(0,"div",0),o.kc(1,U,2,0,"ng-container",1),o.kc(2,B,4,0,"ng-container",1),o.Ob()),2&e&&(o.zb(1),o.dc("ngIf",t.status===t.Status.CHOOSE_WORD),o.zb(1),o.dc("ngIf",t.status===t.Status.PLAY))},directives:[s.j,O,T,F,X],styles:[""]}),e})();var Y=function(e){return e[e.CHOOSE_WORD=0]="CHOOSE_WORD",e[e.PLAY=1]="PLAY",e}({});function J(e,t){if(1&e){const e=o.Qb();o.Pb(0,"button",2),o.Xb("click",(function(){return o.hc(e),o.ac().startGame()})),o.mc(1,"Inizia"),o.Ob()}}let Q=(()=>{class e extends a.a{constructor(e,t){super(),this.playerInfoService=e,this.gameStateService=t}ngOnInit(){this.amIMaster=this.gameStateService.getMaster$().pipe(Object(b.a)(e=>this.playerInfoService.getId()===e))}startGame(){this.gameStateService.initGame()}}return e.\u0275fac=function(t){return new(t||e)(o.Kb(y.a),o.Kb(f))},e.\u0275cmp=o.Eb({type:e,selectors:[["hmo-room"]],features:[o.wb],decls:3,vars:3,consts:[[1,"pt-2"],[3,"click",4,"ngIf"],[3,"click"]],template:function(e,t){1&e&&(o.Pb(0,"div",0),o.kc(1,J,2,0,"button",1),o.bc(2,"async"),o.Ob()),2&e&&(o.zb(1),o.dc("ngIf",o.cc(2,1,t.amIMaster)))},directives:[s.j],pipes:[s.b],styles:[""]}),e})();var q=r("HDdC");let ee=(()=>{class e{constructor(e,t,r,s){this.gameStateService=e,this.socketService=t,this.playerInfoService=r,this.router=s}canActivate(e,t){return new q.a(t=>{this.socketService.sendMessage("join-room",{roomId:e.params.ID,name:this.playerInfoService.getName()},({data:e,ok:r})=>{console.log("join-room",r,e),r&&this.gameStateService.startGame(e),t.next(r||this.router.createUrlTree(["manage-room"])),t.complete()})})}canActivateChild(e,t){return this.canActivate(e.parent,t)}}return e.\u0275fac=function(t){return new(t||e)(o.Tb(f),o.Tb(m.a),o.Tb(y.a),o.Tb(i.a))},e.\u0275prov=o.Gb({token:e,factory:e.\u0275fac}),e})();var te=r("qkV4"),re=r("3ls+");function se(e,t){if(1&e&&(o.Pb(0,"span",4),o.Pb(1,"span",5),o.mc(2),o.Ob(),o.Ob()),2&e){const e=t.$implicit,r=o.ac();o.Cb("border-primary",e.id===r.me)("border-active2",e.id!==r.me)("master",e.id===r.master),o.zb(1),o.Cb("current-turn",e.id===r.currentTurn),o.zb(1),o.pc("",e.name," - ",e.points,"")}}let ie=(()=>{class e extends a.a{constructor(e,t){super(),this.gameStateService=e,this.playerInfoService=t}ngOnInit(){this.me=this.playerInfoService.getId(),this.addSubscription(this.gameStateService.getCurrentTurn$().pipe(Object(n.a)(e=>this.currentTurn=e)).subscribe()),this.addSubscription(this.gameStateService.getMaster$().pipe(Object(n.a)(e=>this.master=e)).subscribe()),this.players=this.gameStateService.getPlayers$()}}return e.\u0275fac=function(t){return new(t||e)(o.Kb(f),o.Kb(y.a))},e.\u0275cmp=o.Eb({type:e,selectors:[["hmo-players-viewer"]],features:[o.wb],decls:6,vars:3,consts:[[1,"sm:flex","items-center","py-2"],[1,"text-2xl","mr-2"],[1,"flex","flex-wrap"],["class","player",3,"border-primary","border-active2","master",4,"ngFor","ngForOf"],[1,"player"],[1,"name"]],template:function(e,t){1&e&&(o.Pb(0,"div",0),o.Pb(1,"div",1),o.mc(2,"Giocatori"),o.Ob(),o.Pb(3,"div",2),o.kc(4,se,3,10,"span",3),o.bc(5,"async"),o.Ob(),o.Ob()),2&e&&(o.zb(4),o.dc("ngForOf",o.cc(5,1,t.players)))},directives:[s.i],pipes:[s.b],styles:['.player[_ngcontent-%COMP%]{border-width:2px;border-radius:9999px;padding:.5rem .75rem;margin:.5rem;overflow:hidden;display:flex;flex-direction:column;position:relative}.player.master[_ngcontent-%COMP%]{padding-left:2rem}.player.master[_ngcontent-%COMP%]:before{background-color:#f7e733;content:"M";position:absolute;top:.15rem;left:-.9rem;transform:rotate(-51deg);text-align:center;width:3.3rem;font-size:smaller;font-weight:bolder;padding-top:.2em}.player[_ngcontent-%COMP%]   .name.current-turn[_ngcontent-%COMP%]{position:relative}.player[_ngcontent-%COMP%]   .name.current-turn[_ngcontent-%COMP%]:after{content:"";border-radius:9999px;height:.25rem;background-color:#083d77;width:100%;position:absolute;top:100%;left:0}']}),e})();var ne=r("IVIS");const ce=[{path:":ID",component:(()=>{class e extends a.a{constructor(e){super(),this.gameStateService=e,this.tooltiptext="Clicca per copiare il link"}ngOnInit(){this.roomId=this.gameStateService.getId$()}getLink(){return e=this,void 0,r=function*(){const e=location.href;yield navigator.clipboard.writeText(e);const t=this.tooltiptext;this.tooltiptext="Link copiato!",setTimeout(()=>this.tooltiptext=t,2e3)},new((t=void 0)||(t=Promise))((function(s,i){function n(e){try{a(r.next(e))}catch(t){i(t)}}function c(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(n,c)}a((r=r.apply(e,[])).next())}));var e,t,r}}return e.\u0275fac=function(t){return new(t||e)(o.Kb(f))},e.\u0275cmp=o.Eb({type:e,selectors:[["hmo-room-title"]],features:[o.wb],decls:9,vars:4,consts:[["hmoUiTitle",""],[1,"tooltip",3,"click"],[1,"tooltiptext"]],template:function(e,t){1&e&&(o.Pb(0,"div",0),o.mc(1,"Stanza: "),o.Pb(2,"span",1),o.Xb("click",(function(){return t.getLink()})),o.mc(3),o.bc(4,"async"),o.Pb(5,"span",2),o.mc(6),o.Ob(),o.Ob(),o.Ob(),o.Lb(7,"hmo-players-viewer"),o.Lb(8,"hmo-ui-animated-router-outlet")),2&e&&(o.zb(3),o.nc(o.cc(4,2,t.roomId)),o.zb(3),o.nc(t.tooltiptext))},directives:[re.a,ie,ne.a],pipes:[s.b],styles:[""]}),e})(),children:[{path:"",component:Q},{path:"play",component:V}],canActivateChild:[ee],canActivate:[ee],canDeactivate:[te.a]}];let ae=(()=>{class e{}return e.\u0275mod=o.Ib({type:e}),e.\u0275inj=o.Hb({factory:function(t){return new(t||e)},imports:[[i.d.forChild(ce)],i.d]}),e})();var oe=r("MH+I");let be=(()=>{class e{}return e.\u0275mod=o.Ib({type:e}),e.\u0275inj=o.Hb({factory:function(t){return new(t||e)},providers:[f,ee],imports:[[s.c,ae,S.b,oe.a]]}),e})()}}]);