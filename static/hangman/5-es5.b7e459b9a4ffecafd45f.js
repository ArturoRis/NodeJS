function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var c,s=e[Symbol.iterator]();!(n=(c=s.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(o){i=!0,a=o}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){return function(){var t,r=_getPrototypeOf(e);if(_isNativeReflectConstruct()){var n=_getPrototypeOf(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{jfCt:function(e,t,r){"use strict";r.r(t),r.d(t,"PlayModule",(function(){return ke}));var n=r("ofXK"),i=r("tyNb"),a=r("vkgz"),c=r("quSY"),s=r("jnLV"),o=r("fXoL"),u=r("lJxs");function l(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(e){return Object(u.a)(function(e,t){return function(r){for(var n=r,i=0;i<t;i++){var a=n[e[i]];if(void 0===a)return;n=a}return n}}(t,n))(e)}}var b=r("7o/Q");function f(e,t){return function(r){return r.lift(new y(e,t))}}var d,p,h,y=function(){function e(t,r){_classCallCheck(this,e),this.compare=t,this.keySelector=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new v(e,this.compare,this.keySelector))}}]),e}(),v=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,i){var a;return _classCallCheck(this,r),(a=t.call(this,e)).keySelector=i,a.hasKey=!1,"function"==typeof n&&(a.compare=n),a}return _createClass(r,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var r=this.keySelector;t=r?r(e):e}catch(i){return this.destination.error(i)}var n=!1;if(this.hasKey)try{n=(0,this.compare)(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}]),r}(b.a),g=r("2Vo4"),m=r("Ea0c"),S=((d=function(){function e(t,r){_classCallCheck(this,e),this.socketService=t,this.router=r,this.channel=new g.a({status:null,currentWord:[],currentTurn:null,errors:0,guesses:[],id:null,master:null,newGuess:null,players:[]}),this.sub=new c.a,this.registerActions()}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}},{key:"updateState",value:function(e){var t=Object.assign(Object.assign({},this.channel.value),e);this.channel.next(t)}},{key:"startGame",value:function(e){this.updateState(e)}},{key:"registerActions",value:function(){var e=this;this.sub.add(this.socketService.getMessages$("player-leave").pipe(Object(a.a)((function(t){var r=t.data,n=r.player,i=r.master,a={};a.players=e.state.players.filter((function(e){return e.id!==n.id})),i&&(a.master=i),e.updateState(a)}))).subscribe()),this.sub.add(this.socketService.getMessages$("player-join").pipe(Object(a.a)((function(t){var r=t.data,n=[].concat(_toConsumableArray(e.state.players),[r]);e.updateState({players:n})}))).subscribe()),this.sub.add(this.socketService.getMessages$("go-to-start").pipe(Object(a.a)((function(t){var r=t.data;e.updateState(r),e.router.navigate(["game",r.id,"play"])}))).subscribe()),this.sub.add(this.socketService.getMessages$("finish-game").pipe(Object(a.a)((function(t){var r=t.data;e.updateState({status:r})}))).subscribe()),this.sub.add(this.socketService.getMessages$("set-word").pipe(Object(a.a)((function(t){var r=t.data;e.updateState({currentWord:r})}))).subscribe()),this.sub.add(this.socketService.getMessages$("restart-game").pipe(Object(a.a)((function(t){var r=t.data;e.updateState(Object.assign(Object.assign({},r),{newGuess:null}))}))).subscribe()),this.sub.add(this.socketService.getMessages$("new-guess").pipe(Object(a.a)((function(t){var r=t.data,n={};r.ids&&r.ids.length?n.currentWord=e.state.currentWord.map((function(e){var t=Object.assign({},e);return r.ids.includes(e.id)&&(t.isGuessed=!0,t.letter=r.letter),t})):n.errors=e.state.errors+1,n.newGuess=r,n.guesses=e.state.guesses.concat([r]),e.updateState(n)}))).subscribe()),this.sub.add(this.socketService.getMessages$("new-turn").pipe(Object(a.a)((function(t){var r=t.data;return e.updateState({currentTurn:r})}))).subscribe())}},{key:"setWord",value:function(e){this.socketService.sendMessage("set-word",e)}},{key:"restartGame",value:function(){this.socketService.sendMessage("restart-game",void 0)}},{key:"sendLetter",value:function(e){this.socketService.sendMessage("new-guess",e)}},{key:"initGame",value:function(){this.socketService.sendMessage("init-game",void 0)}},{key:"getState$",value:function(){return this.channel.asObservable()}},{key:"getStatus$",value:function(){return this.getState$().pipe(l("status"),f())}},{key:"getNewGuess$",value:function(){return this.getState$().pipe(l("newGuess"),f())}},{key:"getGuesses$",value:function(){return this.getState$().pipe(l("guesses"),f())}},{key:"getErrors$",value:function(){return this.getState$().pipe(l("errors"),f())}},{key:"getWord$",value:function(){return this.getState$().pipe(l("currentWord"),f())}},{key:"getCurrentTurn$",value:function(){return this.getState$().pipe(l("currentTurn"),f())}},{key:"getMaster$",value:function(){return this.getState$().pipe(l("master"),f())}},{key:"getPlayers$",value:function(){return this.getState$().pipe(l("players"),f())}},{key:"getId$",value:function(){return this.getState$().pipe(l("id"),f())}},{key:"state",get:function(){return this.channel.value}}]),e}()).\u0275fac=function(e){return new(e||d)(o.Tb(m.a),o.Tb(i.a))},d.\u0275prov=o.Gb({token:d,factory:d.\u0275fac}),d),O=r("FJHl"),k=((p=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,i,a){var c;return _classCallCheck(this,r),(c=t.call(this)).elRef=e,c.renderer=n,c.gameStateService=i,c.playerInfoService=a,c.wFull=!1,c.block=!1,c}return _createClass(r,[{key:"ngOnInit",value:function(){var e=this;this.addSubscription(this.gameStateService.getCurrentTurn$().pipe(Object(a.a)((function(t){e.playerInfoService.getId()!==t?e.renderer.setAttribute(e.elRef.nativeElement,"hidden","true"):e.renderer.removeAttribute(e.elRef.nativeElement,"hidden")}))).subscribe())}}]),r}(s.a)).\u0275fac=function(e){return new(e||p)(o.Kb(o.l),o.Kb(o.D),o.Kb(S),o.Kb(O.a))},p.\u0275dir=o.Fb({type:p,selectors:[["","hmoWaitingTurn",""]],features:[o.wb]}),p),w=r("3Pt+"),_=((h=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).gameStateService=e,n}return _createClass(r,[{key:"ngOnInit",value:function(){}},{key:"chooseWord",value:function(){this.gameStateService.setWord(this.word)}}]),r}(s.a)).\u0275fac=function(e){return new(e||h)(o.Kb(S))},h.\u0275cmp=o.Eb({type:h,selectors:[["hmo-choose-word"]],features:[o.wb],decls:11,vars:2,consts:[["hmoWaitingTurn","",1,"space-y-2"],["hidden","","for","word"],["id","word","type","text","required","","pattern","[a-zA-Z]+( [a-zA-Z]+)*","name","word",1,"rounded-r-none",3,"ngModel","ngModelChange"],["wordModel","ngModel"],["type","submit",1,"rounded-l-none","border","border-primary",3,"disabled","click"]],template:function(e,t){if(1&e&&(o.Pb(0,"div",0),o.Pb(1,"div"),o.mc(2,"Scrivi la parola che gli altri dovranno indovinare"),o.Ob(),o.Pb(3,"div"),o.Pb(4,"form"),o.Pb(5,"label",1),o.mc(6,"Parola da indovinare"),o.Ob(),o.Pb(7,"input",2,3),o.Xb("ngModelChange",(function(e){return t.word=e})),o.Ob(),o.Pb(9,"button",4),o.Xb("click",(function(){return t.chooseWord()})),o.mc(10,"Ok "),o.Ob(),o.Ob(),o.Ob(),o.Ob()),2&e){var r=o.gc(8);o.zb(7),o.dc("ngModel",t.word),o.zb(2),o.dc("disabled",r.invalid)}},directives:[k,w.i,w.d,w.e,w.a,w.h,w.g,w.c,w.f],styles:[""]}),h);function x(e,t){1&e&&(o.Zb(),o.Lb(0,"circle",12))}function I(e,t){1&e&&(o.Zb(),o.Lb(0,"line",13))}function C(e,t){1&e&&(o.Zb(),o.Lb(0,"line",14))}function P(e,t){1&e&&(o.Zb(),o.Lb(0,"line",15))}function T(e,t){1&e&&(o.Zb(),o.Lb(0,"line",16))}function j(e,t){1&e&&(o.Zb(),o.Lb(0,"line",17))}function E(e,t){1&e&&(o.Zb(),o.Pb(0,"g"),o.Pb(1,"g"),o.Lb(2,"line",18),o.Lb(3,"line",19),o.Ob(),o.Pb(4,"g"),o.Lb(5,"line",20),o.Lb(6,"line",21),o.Ob(),o.Pb(7,"g",22),o.Lb(8,"line",23),o.Lb(9,"line",24),o.Lb(10,"path",25),o.Lb(11,"path",26),o.Ob(),o.Ob())}function L(e,t){if(1&e&&(o.Zb(),o.Pb(0,"g"),o.kc(1,x,1,0,"circle",6),o.kc(2,I,1,0,"line",7),o.kc(3,C,1,0,"line",8),o.kc(4,P,1,0,"line",9),o.kc(5,T,1,0,"line",10),o.kc(6,j,1,0,"line",11),o.kc(7,E,12,0,"g",1),o.Ob()),2&e){var r=o.ac();o.zb(1),o.dc("ngIf",r.firstError),o.zb(1),o.dc("ngIf",r.secondError),o.zb(1),o.dc("ngIf",r.thirdError),o.zb(1),o.dc("ngIf",r.fourthError),o.zb(1),o.dc("ngIf",r.fifthError),o.zb(1),o.dc("ngIf",r.sixthError),o.zb(1),o.dc("ngIf",r.sixthError)}}function M(e,t){1&e&&(o.Zb(),o.Pb(0,"g"),o.Lb(1,"circle",27),o.Lb(2,"line",28),o.Lb(3,"line",29),o.Lb(4,"line",30),o.Lb(5,"line",31),o.Lb(6,"line",32),o.Pb(7,"g"),o.Lb(8,"path",33),o.Lb(9,"path",34),o.Ob(),o.Lb(10,"line",35),o.Lb(11,"line",36),o.Ob())}var $,A=(($=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).gameStateService=e,n.firstError=!1,n.secondError=!1,n.thirdError=!1,n.fourthError=!1,n.fifthError=!1,n.sixthError=!1,n.numOfErrors=0,n}return _createClass(r,[{key:"ngOnInit",value:function(){var e=this;this.addSubscription(this.gameStateService.getErrors$().pipe(Object(a.a)((function(t){return e.setError(t)}))).subscribe()),this.addSubscription(this.gameStateService.getStatus$().pipe(Object(a.a)((function(t){e.showWin=t&&"lose"!==t?e.gameStateService.state.players.find((function(e){return e.id===t})).name:void 0}))).subscribe())}},{key:"setError",value:function(e){this.numOfErrors=e,this.showError(this.numOfErrors)}},{key:"showError",value:function(e){switch(e){case z.SIXTH:this.sixthError=!0;case z.FIFTH:this.fifthError=!0;case z.FOURTH:this.fourthError=!0;case z.THIRD:this.thirdError=!0;case z.SECOND:this.secondError=!0;case z.FIRST:this.firstError=!0}}}]),r}(s.a)).\u0275fac=function(e){return new(e||$)(o.Kb(S))},$.\u0275cmp=o.Eb({type:$,selectors:[["hmo-hangman"]],features:[o.wb],decls:9,vars:2,consts:[["version","1.1","xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","viewBox","0 0 236 333",1,"h-48","w-full"],[4,"ngIf"],["x1","0","y1","330.5","x2","236","y2","330.5"],["x1","59","y1","0","x2","59","y2","330.5"],["x1","139.4","y1","53.5","x2","139.4","y2","0"],["x1","58","y1","2.5","x2","139.4","y2","2.5"],["cx","139.4","cy","89.1","r","35.6",4,"ngIf"],["x1","139.4","y1","124.7","x2","139.4","y2","218.7",4,"ngIf"],["x1","139.4","y1","133.9","x2","121.6","y2","212.4",4,"ngIf"],["x1","139.4","y1","134.3","x2","154.2","y2","210.8",4,"ngIf"],["x1","139.4","y1","218.7","x2","114.2","y2","299.3",4,"ngIf"],["x1","139.4","y1","218.7","x2","167.5","y2","291.4",4,"ngIf"],["cx","139.4","cy","89.1","r","35.6"],["x1","139.4","y1","124.7","x2","139.4","y2","218.7"],["x1","139.4","y1","133.9","x2","121.6","y2","212.4"],["x1","139.4","y1","134.3","x2","154.2","y2","210.8"],["x1","139.4","y1","218.7","x2","114.2","y2","299.3"],["x1","139.4","y1","218.7","x2","167.5","y2","291.4"],["x1","122.9","y1","83.4","x2","131.1","y2","91.6"],["x1","122.6","y1","91.9","x2","131.6","y2","82.9"],["x1","147","y1","83.5","x2","155.3","y2","91.8"],["x1","146.8","y1","92","x2","155.8","y2","83"],["transform","matrix(0.345235 0 0 0.431385 31.9527 -3.32898)"],["y2","247.87387084960938","x2","356.18206787109375","y1","247.47872924804688","x1","266.3751220703125"],["y2","263.642578125","x2","341.2400817871094","y1","247.42074584960938","x1","337.6490783691406"],["d","m330.357143,245.357143"],["transform","matrix(-0.472259 -0.706397 0.88146 -0.378466 281.844 598.371)","d","M350.8395,270.71429c-49.027030000000025,-40.117490000000004,10.939909999999998,-32.21556000000001,17.01763999999997,-31.60772"],["cx","167","cy","119.9","r","35.6"],["x1","167","y1","169","x2","231.8","y2","96.7"],["x1","167","y1","155.5","x2","167","y2","249.4"],["x1","167","y1","249.4","x2","180.4","y2","330.5"],["x1","167","y1","249.4","x2","142.4","y2","330.5"],["x1","167","y1","169","x2","92.8","y2","106.4"],["d","M151.8,133.7c0,4.2,6.9,7.7,15.4,7.7"],["d","M182.2,133.7c0,4.2-6.9,7.7-15.4,7.7"],["x1","151","y1","118.1","x2","161.1","y2","118.1"],["x1","173.1","y1","118.1","x2","183.2","y2","118.1"]],template:function(e,t){1&e&&(o.Pb(0,"div"),o.Zb(),o.Pb(1,"svg",0),o.kc(2,L,8,7,"g",1),o.kc(3,M,12,0,"g",1),o.Pb(4,"g"),o.Lb(5,"line",2),o.Lb(6,"line",3),o.Lb(7,"line",4),o.Lb(8,"line",5),o.Ob(),o.Ob(),o.Ob()),2&e&&(o.zb(2),o.dc("ngIf",!t.showWin),o.zb(1),o.dc("ngIf",t.showWin))},directives:[n.j],styles:["span[_ngcontent-%COMP%]{opacity:0}span.visible[_ngcontent-%COMP%]{opacity:1}span[_ngcontent-%COMP%]:not(:last-child){margin-right:.3em}svg[_ngcontent-%COMP%]{fill:none;stroke:#2b2d42;stroke-width:5;stroke-miterlimit:10}"]}),$),z=function(e){return e[e.FIRST=1]="FIRST",e[e.SECOND=2]="SECOND",e[e.THIRD=3]="THIRD",e[e.FOURTH=4]="FOURTH",e[e.FIFTH=5]="FIFTH",e[e.SIXTH=6]="SIXTH",e}({}),W=r("pLZG");function R(e,t){if(1&e&&(o.Nb(0),o.mc(1),o.Mb()),2&e){var r=o.ac().$implicit;o.zb(1),o.nc(r.isGuessed?r.letter:"_")}}function G(e,t){1&e&&o.mc(0,"\xa0")}function H(e,t){if(1&e&&(o.Pb(0,"span",2),o.kc(1,R,2,1,"ng-container",3),o.kc(2,G,1,0,"ng-template",null,4,o.lc),o.Ob()),2&e){var r=t.$implicit,n=o.gc(3);o.zb(1),o.dc("ngIf",r.letter)("ngIfElse",n)}}var F,D=((F=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).gameStateService=e,n}return _createClass(r,[{key:"ngOnInit",value:function(){this.lettersInfo=this.gameStateService.getWord$().pipe(Object(W.a)((function(e){return!!e&&!!e.length})))}}]),r}(s.a)).\u0275fac=function(e){return new(e||F)(o.Kb(S))},F.\u0275cmp=o.Eb({type:F,selectors:[["hmo-guessing-word"]],features:[o.wb],decls:3,vars:3,consts:[[1,"m-4","text-center"],["class","letter",4,"ngFor","ngForOf"],[1,"letter"],[4,"ngIf","ngIfElse"],["whiteSpaceTemplate",""]],template:function(e,t){1&e&&(o.Pb(0,"div",0),o.kc(1,H,4,2,"span",1),o.bc(2,"async"),o.Ob()),2&e&&(o.zb(1),o.dc("ngForOf",o.cc(2,1,t.lettersInfo)))},directives:[n.i,n.j],pipes:[n.b],styles:[".letter[_ngcontent-%COMP%]{display:inline-block;width:2.5rem;text-align:center;padding:.5rem;border-right-width:2px;border-top-width:2px;border-bottom-width:2px;border-color:#083d77}.letter[_ngcontent-%COMP%]:first-child{border-top-left-radius:.5rem;border-bottom-left-radius:.5rem;border-left-width:2px}.letter[_ngcontent-%COMP%]:last-child{border-top-right-radius:.5rem;border-bottom-right-radius:.5rem}"]}),F),K=r("SxV6"),N=r("itXk");function Z(e,t){if(1&e){var r=o.Qb();o.Pb(0,"button",6),o.Xb("click",(function(){o.hc(r);var e=t.$implicit;return o.ac(2).buttonClicked(e.key)})),o.mc(1),o.Ob()}if(2&e){var n=t.$implicit;o.dc("disabled",n.isDisabled),o.zb(1),o.nc(n.key)}}function X(e,t){if(1&e&&(o.Pb(0,"div",3),o.Pb(1,"div",4),o.kc(2,Z,2,2,"button",5),o.Ob(),o.Ob()),2&e){var r=o.ac();o.zb(2),o.dc("ngForOf",r.BUTTONS)}}function U(e,t){if(1&e&&(o.Pb(0,"div",10),o.mc(1),o.Ob()),2&e){var r=o.ac(2);o.zb(1),o.oc(" Complimenti ",r.itsMe?"hai vinto":"a "+r.showWin,"! ")}}function B(e,t){if(1&e&&(o.Pb(0,"div"),o.mc(1),o.Ob()),2&e){var r=o.ac(2);o.zb(1),o.oc(' Hai perso, la parola era: "',r.guessingWord,'" ')}}function V(e,t){if(1&e&&(o.Pb(0,"div",7),o.kc(1,U,2,1,"div",8),o.kc(2,B,2,1,"div",9),o.Ob()),2&e){var r=o.ac();o.zb(1),o.dc("ngIf",r.showWin),o.zb(1),o.dc("ngIf",!r.showWin)}}function Y(e,t){if(1&e){var r=o.Qb();o.Pb(0,"div",11),o.Pb(1,"button",12),o.Xb("click",(function(){return o.hc(r),o.ac().restartGame()})),o.mc(2,"Ricomincia"),o.Ob(),o.Ob()}}var J,Q=((J=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n){var i;_classCallCheck(this,r),(i=t.call(this)).gameStateService=e,i.playerInfoService=n,i.BUTTONS=[];for(var a=65;a<91;a++)i.BUTTONS.push({key:String.fromCharCode(a),isDisabled:!1});return i}return _createClass(r,[{key:"ngOnInit",value:function(){var e=this;this.showGameKeyboard=this.gameStateService.getStatus$().pipe(Object(u.a)((function(e){return!e}))),this.showRestart=Object(N.a)([this.showGameKeyboard,this.gameStateService.getMaster$()]).pipe(Object(u.a)((function(t){var r=_slicedToArray(t,2),n=r[0],i=r[1];return!n&&e.playerInfoService.getId()===i}))),this.addSubscription(this.gameStateService.getNewGuess$().pipe(Object(W.a)((function(e){return!!e})),Object(a.a)((function(t){var r=t.letter;return e.disableButton(r)}))).subscribe()),this.addSubscription(this.gameStateService.getGuesses$().pipe(Object(K.a)(),Object(a.a)((function(t){return t.forEach((function(t){return e.disableButton(t.letter)}))}))).subscribe()),this.addSubscription(this.gameStateService.getStatus$().pipe(Object(a.a)((function(t){e.itsMe=void 0,e.showWin=void 0,t&&"lose"!==t?(e.showWin=e.gameStateService.state.players.find((function(e){return e.id===t})).name,e.itsMe=t===e.playerInfoService.getId()):"lose"===t&&(e.showWin=!1)}))).subscribe()),this.addSubscription(this.gameStateService.getWord$().pipe(Object(a.a)((function(t){return e.guessingWord=t.map((function(e){return e.letter||" "})).join("")}))).subscribe())}},{key:"buttonClicked",value:function(e){this.gameStateService.sendLetter(e)}},{key:"disableButton",value:function(e){var t=this.BUTTONS.find((function(t){return t.key===e}));t&&(t.isDisabled=!0)}},{key:"restartGame",value:function(){this.gameStateService.restartGame()}}]),r}(s.a)).\u0275fac=function(e){return new(e||J)(o.Kb(S),o.Kb(O.a))},J.\u0275cmp=o.Eb({type:J,selectors:[["hmo-game-keyboard"]],features:[o.wb],decls:5,vars:7,consts:[["hmoWaitingTurn","",4,"ngIf"],["class","my-2 text-xl text-center",4,"ngIf"],["class","text-center",4,"ngIf"],["hmoWaitingTurn",""],[1,"flex","flex-wrap","justify-around","md:mx-auto","md:w-10/12"],["class","m-2 py-4 md:py-3 md:m-2 w-1/4 sm:w-1/6 md:w-1/12",3,"disabled","click",4,"ngFor","ngForOf"],[1,"m-2","py-4","md:py-3","md:m-2","w-1/4","sm:w-1/6","md:w-1/12",3,"disabled","click"],[1,"my-2","text-xl","text-center"],["class","",4,"ngIf"],[4,"ngIf"],[1,""],[1,"text-center"],[3,"click"]],template:function(e,t){1&e&&(o.kc(0,X,3,1,"div",0),o.bc(1,"async"),o.kc(2,V,3,2,"div",1),o.kc(3,Y,3,0,"div",2),o.bc(4,"async")),2&e&&(o.dc("ngIf",o.cc(1,3,t.showGameKeyboard)),o.zb(2),o.dc("ngIf",void 0!==t.showWin),o.zb(1),o.dc("ngIf",o.cc(4,5,t.showRestart)))},directives:[n.j,k,n.i],pipes:[n.b],styles:[""]}),J);function q(e,t){1&e&&(o.Nb(0),o.Lb(1,"hmo-choose-word"),o.Mb())}function ee(e,t){1&e&&(o.Nb(0),o.Lb(1,"hmo-hangman"),o.Lb(2,"hmo-guessing-word"),o.Lb(3,"hmo-game-keyboard"),o.Mb())}var te,re=((te=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).gameStateService=e,n.Status=ne,n.sub=new c.a,n}return _createClass(r,[{key:"ngOnInit",value:function(){var e=this;this.sub.add(this.gameStateService.getWord$().pipe(Object(a.a)((function(t){e.status=t&&t.length?ne.PLAY:ne.CHOOSE_WORD}))).subscribe())}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}}]),r}(s.a)).\u0275fac=function(e){return new(e||te)(o.Kb(S))},te.\u0275cmp=o.Eb({type:te,selectors:[["hmo-play-screen"]],features:[o.wb],decls:3,vars:2,consts:[[1,"pt-2"],[4,"ngIf"]],template:function(e,t){1&e&&(o.Pb(0,"div",0),o.kc(1,q,2,0,"ng-container",1),o.kc(2,ee,4,0,"ng-container",1),o.Ob()),2&e&&(o.zb(1),o.dc("ngIf",t.status===t.Status.CHOOSE_WORD),o.zb(1),o.dc("ngIf",t.status===t.Status.PLAY))},directives:[n.j,_,A,D,Q],styles:[""]}),te),ne=function(e){return e[e.CHOOSE_WORD=0]="CHOOSE_WORD",e[e.PLAY=1]="PLAY",e}({});function ie(e,t){if(1&e){var r=o.Qb();o.Pb(0,"button",2),o.Xb("click",(function(){return o.hc(r),o.ac().startGame()})),o.mc(1,"Inizia"),o.Ob()}}var ae,ce,se=((ae=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n){var i;return _classCallCheck(this,r),(i=t.call(this)).playerInfoService=e,i.gameStateService=n,i}return _createClass(r,[{key:"ngOnInit",value:function(){var e=this;this.amIMaster=this.gameStateService.getMaster$().pipe(Object(u.a)((function(t){return e.playerInfoService.getId()===t})))}},{key:"startGame",value:function(){this.gameStateService.initGame()}}]),r}(s.a)).\u0275fac=function(e){return new(e||ae)(o.Kb(O.a),o.Kb(S))},ae.\u0275cmp=o.Eb({type:ae,selectors:[["hmo-room"]],features:[o.wb],decls:3,vars:3,consts:[[1,"pt-2"],[3,"click",4,"ngIf"],[3,"click"]],template:function(e,t){1&e&&(o.Pb(0,"div",0),o.kc(1,ie,2,0,"button",1),o.bc(2,"async"),o.Ob()),2&e&&(o.zb(1),o.dc("ngIf",o.cc(2,1,t.amIMaster)))},directives:[n.j],pipes:[n.b],styles:[""]}),ae),oe=r("HDdC"),ue=((ce=function(){function e(t,r,n,i){_classCallCheck(this,e),this.gameStateService=t,this.socketService=r,this.playerInfoService=n,this.router=i}return _createClass(e,[{key:"canActivate",value:function(e,t){var r=this;return new oe.a((function(t){r.socketService.sendMessage("join-room",{roomId:e.params.ID,name:r.playerInfoService.getName()},(function(e){var n=e.data,i=e.ok;console.log("join-room",i,n),i&&r.gameStateService.startGame(n),t.next(i||r.router.createUrlTree(["manage-room"])),t.complete()}))}))}},{key:"canActivateChild",value:function(e,t){return this.canActivate(e.parent,t)}}]),e}()).\u0275fac=function(e){return new(e||ce)(o.Tb(S),o.Tb(m.a),o.Tb(O.a),o.Tb(i.a))},ce.\u0275prov=o.Gb({token:ce,factory:ce.\u0275fac}),ce),le=r("qkV4"),be=r("3ls+");function fe(e,t){if(1&e&&(o.Pb(0,"span",4),o.Pb(1,"span",5),o.mc(2),o.Ob(),o.Ob()),2&e){var r=t.$implicit,n=o.ac();o.Cb("border-primary",r.id===n.me)("border-active2",r.id!==n.me)("master",r.id===n.master),o.zb(1),o.Cb("current-turn",r.id===n.currentTurn),o.zb(1),o.pc("",r.name," - ",r.points,"")}}var de,pe,he,ye,ve=((de=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n){var i;return _classCallCheck(this,r),(i=t.call(this)).gameStateService=e,i.playerInfoService=n,i}return _createClass(r,[{key:"ngOnInit",value:function(){var e=this;this.me=this.playerInfoService.getId(),this.addSubscription(this.gameStateService.getCurrentTurn$().pipe(Object(a.a)((function(t){return e.currentTurn=t}))).subscribe()),this.addSubscription(this.gameStateService.getMaster$().pipe(Object(a.a)((function(t){return e.master=t}))).subscribe()),this.players=this.gameStateService.getPlayers$()}}]),r}(s.a)).\u0275fac=function(e){return new(e||de)(o.Kb(S),o.Kb(O.a))},de.\u0275cmp=o.Eb({type:de,selectors:[["hmo-players-viewer"]],features:[o.wb],decls:6,vars:3,consts:[[1,"sm:flex","items-center","py-2"],[1,"text-2xl","mr-2"],[1,"flex","flex-wrap"],["class","player",3,"border-primary","border-active2","master",4,"ngFor","ngForOf"],[1,"player"],[1,"name"]],template:function(e,t){1&e&&(o.Pb(0,"div",0),o.Pb(1,"div",1),o.mc(2,"Giocatori"),o.Ob(),o.Pb(3,"div",2),o.kc(4,fe,3,10,"span",3),o.bc(5,"async"),o.Ob(),o.Ob()),2&e&&(o.zb(4),o.dc("ngForOf",o.cc(5,1,t.players)))},directives:[n.i],pipes:[n.b],styles:['.player[_ngcontent-%COMP%]{border-width:2px;border-radius:9999px;padding:.5rem .75rem;margin:.5rem;overflow:hidden;display:flex;flex-direction:column;position:relative}.player.master[_ngcontent-%COMP%]{padding-left:2rem}.player.master[_ngcontent-%COMP%]:before{background-color:#f7e733;content:"M";position:absolute;top:.15rem;left:-.9rem;transform:rotate(-51deg);text-align:center;width:3.3rem;font-size:smaller;font-weight:bolder;padding-top:.2em}.player[_ngcontent-%COMP%]   .name.current-turn[_ngcontent-%COMP%]{position:relative}.player[_ngcontent-%COMP%]   .name.current-turn[_ngcontent-%COMP%]:after{content:"";border-radius:9999px;height:.25rem;background-color:#083d77;width:100%;position:absolute;top:100%;left:0}']}),de),ge=r("IVIS"),me=[{path:":ID",component:(pe=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).gameStateService=e,n.tooltiptext="Clicca per copiare il link",n}return _createClass(r,[{key:"ngOnInit",value:function(){this.roomId=this.gameStateService.getId$()}},{key:"getLink",value:function(){return e=this,r=regeneratorRuntime.mark((function e(){var t,r,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=location.href,e.next=3,navigator.clipboard.writeText(t);case 3:r=this.tooltiptext,this.tooltiptext="Link copiato!",setTimeout((function(){return n.tooltiptext=r}),2e3);case 5:case"end":return e.stop()}}),e,this)})),new((t=void 0)||(t=Promise))((function(n,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,c)}s((r=r.apply(e,[])).next())}));var e,t,r}}]),r}(s.a),pe.\u0275fac=function(e){return new(e||pe)(o.Kb(S))},pe.\u0275cmp=o.Eb({type:pe,selectors:[["hmo-room-title"]],features:[o.wb],decls:9,vars:4,consts:[["hmoUiTitle",""],[1,"tooltip",3,"click"],[1,"tooltiptext"]],template:function(e,t){1&e&&(o.Pb(0,"div",0),o.mc(1,"Stanza: "),o.Pb(2,"span",1),o.Xb("click",(function(){return t.getLink()})),o.mc(3),o.bc(4,"async"),o.Pb(5,"span",2),o.mc(6),o.Ob(),o.Ob(),o.Ob(),o.Lb(7,"hmo-players-viewer"),o.Lb(8,"hmo-ui-animated-router-outlet")),2&e&&(o.zb(3),o.nc(o.cc(4,2,t.roomId)),o.zb(3),o.nc(t.tooltiptext))},directives:[be.a,ve,ge.a],pipes:[n.b],styles:[""]}),pe),children:[{path:"",component:se},{path:"play",component:re}],canActivateChild:[ue],canActivate:[ue],canDeactivate:[le.a]}],Se=((he=function e(){_classCallCheck(this,e)}).\u0275mod=o.Ib({type:he}),he.\u0275inj=o.Hb({factory:function(e){return new(e||he)},imports:[[i.d.forChild(me)],i.d]}),he),Oe=r("MH+I"),ke=((ye=function e(){_classCallCheck(this,e)}).\u0275mod=o.Ib({type:ye}),ye.\u0275inj=o.Hb({factory:function(e){return new(e||ye)},providers:[S,ue],imports:[[n.c,Se,w.b,Oe.a]]}),ye)}}]);